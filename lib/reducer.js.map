{"version":3,"sources":["../src/reducer.js"],"names":["ACTIONS","register","id","renderFn","unregister","toggle","show","args","hide","hideAll","views","state","payload","displaying","newViews","newDisplaying","indexOf","index","splice"],"mappings":"8VAAA,6C;;;AAGO,IAAMA,4BAAU;AACrBC,YAAU,gCAAa,2BAAb,EAA0C,UAACC,EAAD,EAAKC,QAAL,UAAmB,EAAED,MAAF,EAAMC,kBAAN,EAAnB,EAA1C,CADW;AAErBC,cAAY,gCAAa,6BAAb,EAA4C,UAACF,EAAD,UAAS,EAAEA,MAAF,EAAT,EAA5C,CAFS;AAGrBG,UAAQ,gCAAa,yBAAb,CAHa;AAIrBC,QAAM,gCAAa,uBAAb,EAAsC,UAACJ,EAAD,qCAAQK,IAAR,mEAAQA,IAAR,qCAAkB,EAAEL,MAAF,EAAMK,UAAN,EAAlB,EAAtC,CAJe;AAKrBC,QAAM,gCAAa,uBAAb,CALe;AAMrBC,WAAS,gCAAa,2BAAb,CANY,EAAhB,C;;;AASQ,iCAAc;AAC3B,+BAA6B,gDAAsD,KAApDC,KAAoD,QAApDA,KAAoD,KAA1CC,KAA0C,uEAAhCC,OAAgC,KAArBV,EAAqB,iBAArBA,EAAqB,KAAjBC,QAAiB,iBAAjBA,QAAiB;AACjFO,yBAAYA,KAAZ,sBAAoBR,EAApB,EAAyB,EAAEC,kBAAF,EAAYI,MAAMG,MAAMR,EAAN,IAAYQ,MAAMR,EAAN,EAAUK,IAAtB,GAA6B,EAA/C,EAAzB;AACA,wBAAWI,KAAX,IAAkBD,YAAlB;AACD,GAJ0B;AAK3B,iCAA+B,mDAA4C,KAA1CA,KAA0C,SAA1CA,KAA0C,KAAhCC,KAAgC,kDAAXT,EAAW,SAAtBU,OAAsB,CAAXV,EAAW;AACzE,WAAOQ,MAAMR,EAAN,CAAP,CADyE,CACvD;AAClB,wBAAWS,KAAX,IAAkBD,OAAOA,KAAzB;AACD,GAR0B;AAS3B,2BAAyB,6CAA6D,KAA3DG,UAA2D,SAA3DA,UAA2D,KAA/CH,KAA+C,SAA/CA,KAA+C,KAArCC,KAAqC,sFAA3BC,OAA2B,KAAhBV,EAAgB,iBAAhBA,EAAgB,KAAZK,IAAY,iBAAZA,IAAY;AACpF,QAAMO,wBAAgBJ,KAAhB,CAAN;AACA,QAAIK,gBAAgBF,UAApB;AACAC,aAASZ,EAAT,EAAaK,IAAb,GAAoBA,IAApB;AACA,QAAI,CAAC,CAACM,WAAWG,OAAX,CAAmBd,EAAnB,CAAN,EAA8B;AAC5Ba,mDAAoBF,UAApB,IAAgCX,EAAhC;AACD;AACD,wBAAWS,KAAX,IAAkBD,OAAOI,QAAzB,EAAmCD,YAAYE,aAA/C;AACD,GAjB0B;AAkB3B,2BAAyB,6CAA6C,KAAxCJ,KAAwC,2CAAjCE,UAAiC,SAAjCA,UAAiC,KAATX,EAAS,SAAlBU,OAAkB;AACpE,QAAI,OAAOV,EAAP,KAAc,QAAlB,EAA4B;AAC1B,0BAAWS,KAAX,IAAkBE,YAAY,EAA9B;AACD;AACD,QAAME,6CAAoBF,UAApB,EAAN;AACA,QAAMI,QAAQF,cAAcC,OAAd,CAAsBd,EAAtB,CAAd;AACA,QAAIe,UAAU,CAAC,CAAf,EAAkB;AAChBF,oBAAcG,MAAd,CAAqBD,KAArB,EAA4B,CAA5B;AACA,0BAAWN,KAAX,IAAkBE,YAAYE,aAA9B;AACD;AACD,WAAOJ,KAAP;AACD,GA7B0B;AA8B3B,+BAA6B,0CAAgB,KAAXA,KAAW;AAC3C,wBAAWA,KAAX,IAAkBE,YAAY,EAA9B;AACD,GAhC0B,EAAd;AAiCZ;AACCA,cAAY,EADb;AAECH,SAAO,EAFR,EAjCY,C","file":"reducer.js","sourcesContent":["import { handleActions } from 'redux-actions'\nimport { createAction } from 'redux-actions'\n\nexport const ACTIONS = {\n  register: createAction('LAYER_STACK_VIEW_REGISTER', (id, renderFn) => ({ id, renderFn })),\n  unregister: createAction('LAYER_STACK_VIEW_UNREGISTER', (id) => ({ id })),\n  toggle: createAction('LAYER_STACK_VIEW_TOGGLE'),\n  show: createAction('LAYER_STACK_VIEW_SHOW', (id, ...args) => ({ id, args })),\n  hide: createAction('LAYER_STACK_VIEW_HIDE'),\n  hideAll: createAction('LAYER_STACK_VIEW_HIDE_ALL'),\n};\n\nexport default handleActions({\n  'LAYER_STACK_VIEW_REGISTER': ({views, ...state}, { payload: { id, renderFn } }) => {\n    views = {...views, [id]: { renderFn, args: views[id] ? views[id].args : [] } };\n    return {...state, views};\n  },\n  'LAYER_STACK_VIEW_UNREGISTER': ({views, ...state}, { payload: { id } }) => {\n    delete views[id]; // mutable for better GC\n    return {...state, views: views};\n  },\n  'LAYER_STACK_VIEW_SHOW': ({displaying, views, ...state}, { payload: { id, args }}) => {\n    const newViews = { ...views };\n    let newDisplaying = displaying;\n    newViews[id].args = args;\n    if (!~displaying.indexOf(id)) {\n      newDisplaying = [...displaying, id]\n    }\n    return {...state, views: newViews, displaying: newDisplaying };\n  },\n  'LAYER_STACK_VIEW_HIDE': ({...state, displaying}, { payload: id }) => {\n    if (typeof id !== 'string') {\n      return {...state, displaying: [] };\n    }\n    const newDisplaying = [...displaying];\n    const index = newDisplaying.indexOf(id);\n    if (index !== -1) {\n      newDisplaying.splice(index, 1);\n      return {...state, displaying: newDisplaying };\n    }\n    return state;\n  },\n  'LAYER_STACK_VIEW_HIDE_ALL': ({...state}) => {\n    return {...state, displaying: [] };\n  },\n}, {\n    displaying: [],\n    views: {},\n});"]}