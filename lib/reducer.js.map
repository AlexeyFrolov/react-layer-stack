{"version":3,"sources":["../src/reducer.js"],"names":["handleActions","createAction","ACTIONS","register","id","renderFn","unregister","toggle","show","hide","views","state","payload","displaying","newDisplaying","index","indexOf","splice"],"mappings":"uPAAA,SAASA,aAAT,QAA8B,eAA9B;AACA,SAASC,YAAT,QAA6B,eAA7B;;AAEA,OAAO,MAAMC,UAAU;AACrBC,YAAUF,aAAa,2BAAb,EAA0C,CAACG,EAAD,EAAKC,QAAL,MAAmB,EAAED,EAAF,EAAMC,QAAN,EAAnB,CAA1C,CADW;AAErBC,cAAYL,aAAa,6BAAb,EAA6CG,EAAD,KAAS,EAAEA,EAAF,EAAT,CAA5C,CAFS;AAGrBG,UAAQN,aAAa,yBAAb,CAHa;AAIrBO,QAAMP,aAAa,uBAAb,CAJe;AAKrBQ,QAAMR,aAAa,uBAAb,CALe,EAAhB;;;AAQP,eAAeD,cAAc;AAC3B,+BAA6B,CAAC,EAACU,KAAD,EAAQ,GAAGC,KAAX,EAAD,EAAoB,EAAEC,SAAS,EAAER,EAAF,EAAMC,QAAN,EAAX,EAApB,KAAsD;AACjFK,yBAAYA,KAAZ,IAAmB,CAACN,EAAD,GAAMC,QAAzB;AACA,wBAAWM,KAAX,IAAkBD,KAAlB;AACD,GAJ0B;AAK3B,iCAA+B,CAAC,EAACA,KAAD,EAAQ,GAAGC,KAAX,EAAD,EAAoB,EAAEC,SAAS,EAAER,EAAF,EAAX,EAApB,KAA4C;AACzE,WAAOM,MAAMN,EAAN,CAAP,CADyE,CACvD;AAClB,wBAAWO,KAAX,IAAkBD,OAAOA,KAAzB;AACD,GAR0B;AAS3B,2BAAyB,CAAC,EAACG,UAAD,EAAa,GAAGF,KAAhB,EAAD,EAAyB,EAAEC,SAASR,EAAX,EAAzB,KAA4C;AACnE,wBAAWO,KAAX,IAAkBE,YAAY,CAAC,GAAGA,UAAJ,EAAgBT,EAAhB,CAA9B;AACD,GAX0B;AAY3B,2BAAyB,CAAC,EAAC,GAAGO,KAAJ,EAAWE,UAAX,EAAD,EAAyB,EAAED,SAASR,EAAX,EAAzB,KAA6C;AACpE,QAAI,OAAOA,EAAP,KAAc,QAAlB,EAA4B;AAC1B,0BAAWO,KAAX,IAAkBE,YAAY,EAA9B;AACD;AACD,UAAMC,gBAAgB,CAAC,GAAGD,UAAJ,CAAtB;AACA,UAAME,QAAQD,cAAcE,OAAd,CAAsBZ,EAAtB,CAAd;AACA,QAAIW,UAAU,CAAC,CAAf,EAAkB;AAChBD,oBAAcG,MAAd,CAAqBF,KAArB,EAA4B,CAA5B;AACA,0BAAWJ,KAAX,IAAkBE,YAAYC,aAA9B;AACD;AACD,WAAOH,KAAP;AACD,GAvB0B,EAAd;AAwBZ;AACDE,cAAY,EADX;AAECH,SAAO,EAFR,EAxBY,CAAf","file":"reducer.js","sourcesContent":["import { handleActions } from 'redux-actions'\nimport { createAction } from 'redux-actions'\n\nexport const ACTIONS = {\n  register: createAction('LAYER_STACK_VIEW_REGISTER', (id, renderFn) => ({ id, renderFn })),\n  unregister: createAction('LAYER_STACK_VIEW_UNREGISTER', (id) => ({ id })),\n  toggle: createAction('LAYER_STACK_VIEW_TOGGLE'),\n  show: createAction('LAYER_STACK_VIEW_SHOW'),\n  hide: createAction('LAYER_STACK_VIEW_HIDE'),\n};\n\nexport default handleActions({\n  'LAYER_STACK_VIEW_REGISTER': ({views, ...state}, { payload: { id, renderFn } }) => {\n    views = {...views, [id]: renderFn };\n    return {...state, views};\n  },\n  'LAYER_STACK_VIEW_UNREGISTER': ({views, ...state}, { payload: { id } }) => {\n    delete views[id]; // mutable for better GC\n    return {...state, views: views};\n  },\n  'LAYER_STACK_VIEW_SHOW': ({displaying, ...state}, { payload: id}) => {\n    return {...state, displaying: [...displaying, id] };\n  },\n  'LAYER_STACK_VIEW_HIDE': ({...state, displaying}, { payload: id }) => {\n    if (typeof id !== 'string') {\n      return {...state, displaying: [] };\n    }\n    const newDisplaying = [...displaying];\n    const index = newDisplaying.indexOf(id);\n    if (index !== -1) {\n      newDisplaying.splice(index, 1);\n      return {...state, displaying: newDisplaying };\n    }\n    return state;\n  },\n}, {\n  displaying: [],\n    views: {},\n});"]}