{"version":3,"sources":["../src/LayerMountPoint.js"],"names":["LayerMountPoint","props","context","unsubscribe","layerStore","subscribeToLayer","id","setState","index","show","hide","isActive","stack","getStack","layer","getLayer","layerFn","args","contextTypes","object","defaultProps"],"mappings":"gnBAAA,8B;AACA,0C;;;;AAIqBA,e;;;;;AAKnB,2BAAYC,KAAZ,EAAmBC,OAAnB,EAA4B;AACpBD,SADoB,EACbC,OADa;AAE1B,UAAKC,WAAL,GAAmBD,QAAQE,UAAR,CAAmBC,gBAAnB,CAAoCJ,MAAMK,EAA1C,EAA8C,YAAM;AACrE,YAAKC,QAAL,CAAc,EAAd;AACD,KAFkB,CAAnB;AAGA,UAAKH,UAAL,GAAkBF,QAAQE,UAA1B,CAL0B;AAM3B,G;;AAEsB;AACrB,WAAKD,WAAL;AACA,WAAKA,WAAL,GAAmB,IAAnB;AACA,WAAKC,UAAL,GAAkB,IAAlB;AACD,K;;AAEQ;AACe,WAAKH,KADpB,KACCK,EADD,UACCA,EADD,KACKE,KADL,UACKA,KADL;AAE0B,WAAKJ,UAF/B,KAECK,KAFD,eAECA,IAFD,KAEOC,KAFP,eAEOA,IAFP,KAEaC,QAFb,eAEaA,QAFb;AAGP,UAAMC,QAAQ,KAAKR,UAAL,CAAgBS,QAAhB,EAAd;AACA,UAAMC,QAAQ,KAAKV,UAAL,CAAgBW,QAAhB,CAAyBT,EAAzB,CAAd;AACA,aAAOK,SAASL,EAAT,IAAeQ,MAAME,OAAN,eAAc;AAClCR,oBADkC,EAC3BF,MAD2B,EACvBM,YADuB,EAChB;AAClBF,cAAM,wBAAMA,MAAKJ,EAAL,CAAN,EAF4B,EAEZ;AACtB;AACAG,cAAM,mDAAIQ,IAAJ,gDAAIA,IAAJ,iCAAaR,MAAKH,EAAL,EAASW,IAAT,CAAb,EAJ4B,CAIA;AAJA,OAAd,4BAKhBH,MAAMG,IALU,GAAf,GAKa,IALpB;AAMD,K,kEA9BkBjB,e;;;AAiCrBA,gBAAgBkB,YAAhB,GAA+B;AAC7Bd,cAAY,iBAAUe,MADO,EAA/B;;;AAIAnB,gBAAgBoB,YAAhB,GAA+B;AAC7BZ,SAAO,CADsB,EAA/B","file":"LayerMountPoint.js","sourcesContent":["import React, { Component, createElement, PropTypes} from 'react'\nimport LayerStore from './LayerStore';\n\nimport type { MountPointProps } from './types'\n\nexport default class LayerMountPoint extends Component {\n\n  props: MountPointProps;\n  layerStore: LayerStore;\n\n  constructor(props, context) {\n    super(props, context);\n    this.unsubscribe = context.layerStore.subscribeToLayer(props.id, () => {\n      this.setState({})\n    });\n    this.layerStore = context.layerStore;\n  }\n\n  componentWillUnmount() {\n    this.unsubscribe();\n    this.unsubscribe = null;\n    this.layerStore = null;\n  }\n\n  render() {\n    const { id, index } = this.props;\n    const { show, hide, isActive } = this.layerStore;\n    const stack = this.layerStore.getStack();\n    const layer = this.layerStore.getLayer(id);\n    return isActive(id) ? layer.layerFn({\n      index, id, stack, // seems like there is no valid use-case mountPointId in the Layer render function\n      hide: () => hide(id), // intention here is to hide ID's management from Layer and let app developer manage these IDs independently\n      // which will give an ability to write general-purpose Layers and share them b/w projects\n      show: (...args) => show(id, args) // sometimes you may want to change args of the current layer\n    }, ...layer.args) : null;\n  }\n}\n\nLayerMountPoint.contextTypes = {\n  layerStore: PropTypes.object\n};\n\nLayerMountPoint.defaultProps = {\n  index: 0\n};"]}