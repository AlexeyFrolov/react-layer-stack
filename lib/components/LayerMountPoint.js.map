{"version":3,"sources":["../../src/components/LayerMountPoint.js"],"names":["LayerMountPoint","props","context","unsubscribe","layerStore","state","subscribeToLayer","id","setState","show","hide","update","isActive","stack","getStack","layer","getLayer","index","getIndex","layerFn","args","Component","contextTypes","PropTypes","object","defaultProps"],"mappings":"gnBAAA,8B;AACA,uC;AACA,6C;;;AAGqBA,e;;;;;AAKnB,2BAAYC,KAAZ,EAAmBC,OAAnB,EAA4B;AACpBD,SADoB,EACbC,OADa;AAE1B,UAAKC,WAAL,GAAmB,IAAnB;AACA,UAAKC,UAAL,GAAkBF,QAAQE,UAA1B,CAH0B;AAI3B,G;;AAEqBH,S,EAAOI,K,EAAO;AAClC,aAAO,IAAP;AACD,K;;AAEoB;AACnB,WAAKF,WAAL,GAAmB,KAAKC,UAAL,CAAgBE,gBAAhB,CAAiC,KAAKL,KAAL,CAAWM,EAA5C,EAAgD,YAAM;AACvE,eAAKC,QAAL,CAAc,EAAd;AACD,OAFkB,CAAnB;AAGD,K;;AAEsB;AACrB,WAAKL,WAAL;AACA,WAAKA,WAAL,GAAmB,IAAnB;AACA,WAAKC,UAAL,GAAkB,IAAlB;AACD,K;;AAEQ;AACCG,QADD,GACQ,KAAKN,KADb,CACCM,EADD;AAEkC,WAAKH,UAFvC,CAECK,KAFD,eAECA,IAFD,CAEOC,KAFP,eAEOA,IAFP,CAEaC,OAFb,eAEaA,MAFb,CAEqBC,QAFrB,eAEqBA,QAFrB;AAGP,UAAMC,QAAQ,KAAKT,UAAL,CAAgBU,QAAhB,EAAd;AACA,UAAMC,QAAQ,KAAKX,UAAL,CAAgBY,QAAhB,CAAyBT,EAAzB,CAAd;AACA,UAAMU,QAAQ,KAAKb,UAAL,CAAgBc,QAAhB,CAAyBX,EAAzB,CAAd;AACA,aAAOK,SAASL,EAAT,IAAeQ,MAAMI,OAAN,eAAc;AAClCF,oBADkC,EAC3BV,MAD2B,EACvBM,YADuB,EAChB;AAClBH,cAAM,wBAAMA,MAAKH,EAAL,CAAN,EAF4B,EAEZ;AACtB;AACAE,cAAM,mDAAIW,IAAJ,gDAAIA,IAAJ,iCAAaX,MAAKF,EAAL,EAASa,IAAT,CAAb,EAJ4B,EAIC;AACnCT,gBAAQ,sDAAIS,IAAJ,qDAAIA,IAAJ,mCAAaT,QAAOJ,EAAP,EAAWa,IAAX,CAAb,EAL0B,EAAd;AAMhBL,YAAMK,IANU,GAAf,GAMa,IANpB;AAOD,K,8BAxC0CC,gB,oBAAxBrB,e;;;AA2CrBA,gBAAgBsB,YAAhB,GAA+B;AAC7BlB,cAAYmB,oBAAUC,MADO,EAA/B;;;AAIAxB,gBAAgByB,YAAhB,GAA+B;AAC7BR,SAAO,CADsB,EAA/B","file":"LayerMountPoint.js","sourcesContent":["import React, { Component, createElement } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport LayerStore from './../LayerStore';\r\nimport type { MountPointProps } from './../types';\r\n\r\nexport default class LayerMountPoint extends Component {\r\n\r\n  props: MountPointProps;\r\n  layerStore: LayerStore;\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.unsubscribe = null;\r\n    this.layerStore = context.layerStore;\r\n  }\r\n\r\n  shouldComponentUpdate(props, state) {\r\n    return true;\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.unsubscribe = this.layerStore.subscribeToLayer(this.props.id, () => {\r\n      this.setState({})\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.unsubscribe();\r\n    this.unsubscribe = null;\r\n    this.layerStore = null;\r\n  }\r\n\r\n  render() {\r\n    const { id } = this.props;\r\n    const { show, hide, update, isActive } = this.layerStore;\r\n    const stack = this.layerStore.getStack();\r\n    const layer = this.layerStore.getLayer(id);\r\n    const index = this.layerStore.getIndex(id);\r\n    return isActive(id) ? layer.layerFn({\r\n      index, id, stack, // seems like there is no valid use-case mountPointId in the Layer render function\r\n      hide: () => hide(id), // intention here is to hide ID's management from Layer and let app developer manage these IDs independently\r\n      // which will give an ability to write general-purpose Layers and share them b/w projects\r\n      show: (...args) => show(id, args), // sometimes you may want to change args of the current layer\r\n      update: (...args) => update(id, args)\r\n    }, ...layer.args) : null;\r\n  }\r\n}\r\n\r\nLayerMountPoint.contextTypes = {\r\n  layerStore: PropTypes.object\r\n};\r\n\r\nLayerMountPoint.defaultProps = {\r\n  index: 0\r\n};\r\n"]}